"set nocompatible              " be iMproved, required
filetype on " required
set tabstop=4
set shiftwidth=4
set autoindent
set smartindent
"set cindent

" completion

set completeopt=longest,menu

" strict

" close mouse
set mouse-=a

" 解决插入模式下delete/backspce键失效问题
set backspace=2

" close direction key
map <Left> <Nop>
map <Right> <Nop>
map <Up> <Nop>
map <Down> <Nop>

augroup markdown
    au!
    au BufNewFile,BufRead *.md,*.markdown setlocal filetype=ghmarkdown
augroup END


" inoremap

inoremap <s-cr> <ESC>la
inoremap kj <Esc>
inoremap ( ()<LEFT>
inoremap [ []<LEFT>
inoremap { {}<LEFT>
inoremap " ""<LEFT>
inoremap ' ''<LEFT>
" inoremap < <><LEFT>

function! RemovePairs()
    let s:line = getline(".")
    let s:previous_char = s:line[col(".")-1]

    if index(["(","[","{"],s:previous_char) != -1
        let l:original_pos = getpos(".")
        execute "normal %"
        let l:new_pos = getpos(".")
        " only right (
        if l:original_pos == l:new_pos
            execute "normal! a\<BS>"
            return
        end

        let l:line2 = getline(".")
        if len(l:line2) == col(".")
            execute "normal! v%xa"
        else
            execute "normal! v%xi"
        end
    else
        execute "normal! a\<BS>"
    end
endfunction

inoremap <BS> <ESC>:call RemovePairs()<CR>a

syntax on
set nu
set ai
set ruler

call plug#begin('~/.vim/plugged')
Plug 'tomasr/molokai'
Plug 'scrooloose/nerdtree', { 'on':  'NERDTreeToggle' }
Plug 'SirVer/ultisnips' | Plug 'honza/vim-snippets'
call plug#end()

map <F3> :NERDTreeMirror<CR>
map <F3> :NERDTreeToggle<CR>